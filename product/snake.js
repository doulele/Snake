function GN(e,t){if(0==e.indexOf("#")){var n=e.replace(e.charAt(0),"");if(t){if("."!=t.charAt(0))return document.getElementById(n).getElementsByTagName(t);var r=t.replace(t.charAt(0),"");return document.getElementById(n).getElementsByClassName(r)}return document.getElementById(n)}if(0==e.indexOf(".")){n=e.replace(".","");return document.getElementsByClassName(n)}if(0!=e.indexOf("~"))return document.getElementsByTagName(e);n=e.replace("~","");return document.getElementsByName(n)}
var oSnakcw,ch,lala,snake,fd,timer,map=GN("#map"),above=GN("#above"),oLi=GN("li"),speed=300,score=0;function creat(){var e=document.createElement("ul");e.id="snake",GN("#map").insertBefore(e,GN("#above"))}function throttle(t,o){var n;return function(e){n=n||setTimeout(function(){t(e),n=null},o)}}function Snake(){oSnak=GN("#snake"),this.direction="right",this.body=[{x:2,y:0},{x:1,y:0},{x:0,y:0}],this.display=function(){for(var e=0;e<this.body.length;e++)if(null!=this.body[e].x){var t=document.createElement("li");(this.body[e].myli=t).style.left=15*this.body[e].x+"px",t.style.top=15*this.body[e].y+"px",oSnak.appendChild(t)}},this.move=function(){for(var e=this.body.length-1;0<e;e--)this.body[e].x=this.body[e-1].x,this.body[e].y=this.body[e-1].y;switch(this.direction){case"left":--this.body[0].x;break;case"right":this.body[0].x+=1;break;case"up":--this.body[0].y;break;case"down":this.body[0].y+=1}15*this.body[0].x==food.offsetLeft&&15*this.body[0].y==food.offsetTop&&(this.body.push({}),GN("#food")&&(map.removeChild(GN("#food")),Food()),speed=speed<=50?50:speed<=100?speed-5:speed<=200?speed-10:speed<=300?speed-20:null,clearInterval(timer),timer=setInterval("snake.move()",speed),score+=100);for(e=0;e<this.body.length;e++)null!=this.body[e].myli&&oSnak.removeChild(this.body[e].myli);switch(snake.display(),this.direction){case"right":GN("#snake","li")[0].style.transform="rotate(0deg)";break;case"down":GN("#snake","li")[0].style.transform="rotate(90deg)";break;case"left":GN("#snake","li")[0].style.transform="rotate(180deg)";break;case"up":GN("#snake","li")[0].style.transform="rotate(270deg)"}var t=15*this.body[0].x,o=15*this.body[0].y;(t<0||700<t||o<0||500<=o)&&Over();for(e=4;e<this.body.length;e++)t==15*this.body[e].x&&o==15*this.body[e].y&&Over()}}function Food(){var e=document.createElement("div");map.appendChild(e),e.id="food";var t=15*Math.floor(Math.random()*(map.offsetWidth/15)),o=15*Math.floor(Math.random()*(map.offsetHeight/15));e.style.left=t+"px",e.style.top=o+"px"}function key(e){switch((e||window.event).keyCode){case 38:"down"!=snake.direction&&(snake.direction="up");break;case 40:"up"!=snake.direction&&(snake.direction="down");break;case 37:"right"!=snake.direction&&(snake.direction="left");break;case 39:"left"!=snake.direction&&(snake.direction="right")}}function scoreFun(){GN("#score","span")[0].innerText=score}function Over(){GN("#snake").parentNode.removeChild(GN("#snake")),GN("#food").parentNode.removeChild(GN("#food")),GN("#over").className="",scoreFun(),clearInterval(timer),speed=300}creat(),document.onkeydown=throttle(key,100),GN("#begain","button")[0].addEventListener("click",function(){clearInterval(timer),snake=new Snake,fd=new Food,timer=setInterval("snake.move()",speed),GN("#begain").className="hidden"}),GN("#over","button")[0].addEventListener("click",function(){clearInterval(timer),creat(),snake=new Snake,fd=new Food,timer=setInterval("snake.move()",speed),GN("#over").className="hidden",score=0,speed=300});